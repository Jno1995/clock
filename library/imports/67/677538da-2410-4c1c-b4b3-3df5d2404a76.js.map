{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\components\\anima/assets\\scripts\\components\\anima\\AnimationCtr.js"],"names":["cc","Class","extends","Component","properties","animation","Animation","onEnable","on","onFinished","onDisable","off","event","node","name","find","getComponent","play","progressNode","WXHelper","downloadAllResources","downloadProgress","fadeIn","runAction","ProgressBar","progress","destroy","iswxPlatform","_login","_getUserInfo","director","loadScene","console","log"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAWL,GAAGM;AADN,KAHP;;AAOL;;AAEAC,cAAU,oBAAY;AAClB;;AAEA;AACA;AACA;AACA,aAAKF,SAAL,CAAeG,EAAf,CAAkB,UAAlB,EAA8B,KAAKC,UAAnC,EAA+C,IAA/C;AACA;AACA;AACH,KAlBI;;AAoBLC,eAAW,qBAAY;AACnB;;AAEA;AACA;AACA;AACA,aAAKL,SAAL,CAAeM,GAAf,CAAmB,UAAnB,EAA+B,KAAKF,UAApC,EAAgD,IAAhD;AACA;AACA;AACH,KA7BI;;AA+BLA,cA/BK,sBA+BMG,KA/BN,EA+Ba;AACd;AACA,YAAI,KAAKP,SAAL,CAAeQ,IAAf,CAAoBC,IAApB,KAA6B,YAAjC,EAA+C;AAC3Cd,eAAGe,IAAH,CAAQ,iBAAR,EAA2BC,YAA3B,CAAwChB,GAAGM,SAA3C,EAAsDW,IAAtD;AACH;AACD,YAAI,KAAKZ,SAAL,CAAeQ,IAAf,CAAoBC,IAApB,KAA6B,UAAjC,EAA6C;AACzC,gBAAII,eAAelB,GAAGe,IAAH,CAAQ,6BAAR,CAAnB;AACAf,eAAGmB,QAAH,CAAYC,oBAAZ,CAAiCF,YAAjC,EAA+C,UAACL,IAAD,EAAOQ,gBAAP,EAA4B;AACvE,oBAAIC,SAAStB,GAAGsB,MAAH,CAAU,GAAV,CAAb;AACAT,qBAAKU,SAAL,CAAeD,MAAf;AACAT,qBAAKG,YAAL,CAAkBhB,GAAGwB,WAArB,EAAkCC,QAAlC,GAA6CJ,gBAA7C;AACA,oBAAIA,qBAAqB,GAAzB,EAA8B;AAC1BR,yBAAKa,OAAL;AACA,wBAAI1B,GAAGmB,QAAH,CAAYQ,YAAZ,EAAJ,EAAgC;AAC5B3B,2BAAGmB,QAAH,CAAYS,MAAZ,CAAmB,YAAM;AACrB5B,+BAAGmB,QAAH,CAAYU,YAAZ,CAAyB,YAAM;AAC3B7B,mCAAG8B,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,6BAFD;AAGH,yBAJD;AAKH;AACJ;AACJ,aAdD;AAeH;AACD,YAAI,KAAK1B,SAAL,CAAeQ,IAAf,CAAoBC,IAApB,KAA6B,MAAjC,EAAyC;AACrCkB,oBAAQC,GAAR,CAAY,MAAZ;AACH;AACJ;AAzDI,CAAT","file":"AnimationCtr.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\components\\anima","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        animation: cc.Animation,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onEnable: function () {\r\n        //var animation = this.animation;\r\n\r\n        //animation.on('play',      this.onPlay,        this);\r\n        //animation.on('stop',      this.onStop,        this);\r\n        //animation.on('lastframe', this.onLastFrame,   this);\r\n        this.animation.on('finished', this.onFinished, this);\r\n        //animation.on('pause',     this.onPause,       this);\r\n        //animation.on('resume',    this.onResume,      this);\r\n    },\r\n\r\n    onDisable: function () {\r\n        //var animation = this.animation;\r\n\r\n        //animation.off('play',      this.onPlay,        this);\r\n        //animation.off('stop',      this.onStop,        this);\r\n        //animation.off('lastframe', this.onLastFrame,   this);\r\n        this.animation.off('finished', this.onFinished, this);\r\n        //animation.off('pause',     this.onPause,       this);\r\n        //animation.off('resume',    this.onResume,      this);\r\n    },\r\n\r\n    onFinished(event) {\r\n        // this.node.destroy();\r\n        if (this.animation.node.name === \"cocos_icon\") {\r\n            cc.find(\"Canvas/game_log\").getComponent(cc.Animation).play();\r\n        }\r\n        if (this.animation.node.name === \"game_log\") {\r\n            let progressNode = cc.find(\"Canvas/res_load_progressBar\")\r\n            cc.WXHelper.downloadAllResources(progressNode, (node, downloadProgress) => {\r\n                let fadeIn = cc.fadeIn(0.5);\r\n                node.runAction(fadeIn);\r\n                node.getComponent(cc.ProgressBar).progress = downloadProgress;\r\n                if (downloadProgress === 100) {\r\n                    node.destroy();\r\n                    if (cc.WXHelper.iswxPlatform()) {\r\n                        cc.WXHelper._login(() => {\r\n                            cc.WXHelper._getUserInfo(() => {\r\n                                cc.director.loadScene(\"hall\");\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.animation.node.name === \"test\") {\r\n            console.log(\"test\");\r\n        }\r\n    },\r\n});\r\n"]}