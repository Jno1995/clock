{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Utils.js"],"names":["String","prototype","format","args","result","arguments","length","key","undefined","reg","RegExp","replace","i","Utils","addClickEvent","node","target","component","handler","console","log","eventHandler","cc","Component","EventHandler","clickEvents","getComponent","Button","push","addSlideEvent","slideEvents","Slider","addEscEvent","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","onKeyReleased","KEY","back","vv","alert","show","game","end","setHeadAvatar","sprite","avatarUrl","isBigImg","idx","lastIndexOf","substring","avatarSprite","iconUrl","loader","load","url","type","err","texture","isValid","spriteFrame","SpriteFrame","setTexture","atlas","main","getSpriteFrame","const","DEFAULT_HEAD_AVATAR_FRAME_NAME","createPrefabByUrl","parent","cb","loadRes","completedCount","totalCount","item","loading","updateView","prefab","instantiate","find","addChild","showDialogOK","message","okCallback","bUseRichText","alignH","okBtnTextSpr","bRichText","enum","EnumLabelHorizontalAlign","CENTER","curscene","director","getScene","dialog","init","children","showDialogCancel","cancelCallback","cancelBtnTextSpr","showDialogOKCancel","callback","showDialogOKOnly","zIndex","showFlyTip","str","scene","flyTipNode","updateTip","getTimeStampToNow","date","symbol","dateType","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","getStrByTimeStamp","stamp","needDateStr","symbolType","bUseDefault","symbolArr","lan","MATCH_LAN","time","timeObj","y","d","H","dateStr","allStr","index","indexOf","shareGame","title","imgUrl","witchShareTicket","matchId","sceneID","wxHelper","iswxPlatform","query","myself","playerId","playerName","matchData","SHARE_TITLE_GAME","WX_SHARE_GAME_URL","updateShareMenu","shareAppMessageQuery","shareAward","SHARE_TITLE_AWARD","WX_SHARE_AWARD_URL","shareGameWithCallBackEvent","successback","failback","_shareTicket","shareGroupRankEvent","EnumInitView","EIV_GROUP","getSubstringDataByLength","maxLen","subLen","SUBSTRING_MAXLENGTH","SUBSTRING_LENGTH","newArr","totalLength","list","split","getStringDataLength","strI","match","join","getWeightArr","arr","getTimeStampByString","newDate","parse","showGuideNode","dataObj","guideNode","active","toDecimalByLen","x","len","HOLDNUM_LEN","f","parseFloat","isNaN","roundNum","Math","pow","floor","toString","rs","getGoldShow","num","tmpNum","fewNum","utils","getDigit","floorNum","integerNum","decimalNum","tmp","returnToHall","initArr","_initChildNameArr","childArr","bFind","j","name","destroy","secondToCountDown","totalSecond","getRandomInt","min","max","random","getTenThousandBesidesValue","getNodeByName","nodeTab","getChildByName","bool","view","closeViewFunction","Animation","on","play","getNowTimeStamp","getPointNum","nNum","nDigit","nUnit","sSplicing","nTempNum","Array","slice","getBestRecord","DataUser","gameStatus","GameStatus","Win","bestRecord","currentRecord","getTimeString","dateString","second","minute","hour","secondStr","minuteStr","hourStr","GameLanguage","zhLanguage","randomNum","minNum","maxNum","parseInt","module","exports"],"mappings":"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","file":"Utils.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["String.prototype.format = function(args) {  //字符串传参接口\r\n    var result = this;\r\n    if (arguments.length > 0) {    \r\n        if (arguments.length == 1 && typeof (args) == \"object\") {\r\n            for (var key in args) {\r\n                if(args[key]!=undefined){\r\n                    var reg = new RegExp(\"({\" + key + \"})\", \"g\");\r\n                    result = result.replace(reg, args[key]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                if (arguments[i] != undefined) {\r\n                    //var reg = new RegExp(\"({[\" + i + \"]})\", \"g\");//这个在索引大于9时会有问题，谢谢何以笙箫的指出\r\n　　　　　　　　　　　　var reg= new RegExp(\"({)\" + i + \"(})\", \"g\");\r\n                    result = result.replace(reg, arguments[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nconst Utils = {\r\n    addClickEvent: function (node, target, component, handler) {\r\n        console.log(component + \":\" + handler);\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n\r\n    addSlideEvent: function (node, target, component, handler) {\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var slideEvents = node.getComponent(cc.Slider).slideEvents;\r\n        slideEvents.push(eventHandler);\r\n    },\r\n\r\n    addEscEvent: function (node) {\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            onKeyPressed: function (keyCode, event) {\r\n            },\r\n            onKeyReleased: function (keyCode, event) {\r\n                if (keyCode == cc.KEY.back) {\r\n                    cc.vv.alert.show('提示', '确定要退出游戏吗？', function () {\r\n                        cc.game.end();\r\n                    }, true);\r\n                }\r\n            }\r\n        }, node);\r\n    },\r\n\r\n    setHeadAvatar(sprite, avatarUrl, isBigImg) {\r\n\r\n        // TODO: 测试用图\r\n        //avatarUrl = 'http://wx.qlogo.cn/mmopen/vi_32/OVbiaUWeLtZYOXibxl9yk8Ezvvz7iaAnsUghN2SlaevzhaItJh3x9Ih963UDfb5Tr4XXl3hFCtqeqj7EPPKjANyZQ/0';\r\n        if (avatarUrl.length > 0) {\r\n\r\n            //有0、46、64、96、132数值可选，0代表640*640正方形头像\r\n\r\n            if (isBigImg == true) {\r\n\r\n                // 使用大图 将/xxx结尾替换成/0结尾\r\n\r\n                var idx = avatarUrl.lastIndexOf('/');\r\n                if (idx != -1) {\r\n                    avatarUrl = avatarUrl.substring(0, idx);\r\n                    avatarUrl = avatarUrl + '/0';\r\n                }\r\n            }\r\n            else {\r\n\r\n                // 不要大图 如果是/0结尾则替换成/96\r\n\r\n                var idx = avatarUrl.lastIndexOf('/0');\r\n                if (idx != -1) {\r\n                    avatarUrl = avatarUrl.substring(0, idx);\r\n                    avatarUrl = avatarUrl + '/96';\r\n                }\r\n            }\r\n\r\n            // if (!isBigImg || isBigImg == null){\r\n            //     var idx = avatarUrl.lastIndexOf('/0');\r\n            //     if (idx !=-1){\r\n            //         avatarUrl = avatarUrl.substring(0, idx);\r\n            //         avatarUrl = avatarUrl + '/96';\r\n            //     }\r\n            // }\r\n\r\n\r\n            // 防止重复刷新头像\r\n            if (typeof sprite.avatarUrl !== 'undefined' && sprite.avatarUrl === avatarUrl) {\r\n                return;\r\n            }\r\n\r\n            var avatarSprite = sprite;\r\n            var iconUrl = avatarUrl;\r\n            cc.loader.load({ url: avatarUrl, type: 'png' }, function (err, texture) {\r\n                if (!cc.isValid(avatarSprite.node)) {\r\n                    return;\r\n                }\r\n                if (!err && avatarSprite) {\r\n                    avatarSprite.spriteFrame = new cc.SpriteFrame();\r\n                    avatarSprite.spriteFrame.setTexture(texture);\r\n                    avatarSprite.avatarUrl = iconUrl;\r\n                }\r\n                else {\r\n                    avatarSprite.spriteFrame = cc.vv.atlas.main.getSpriteFrame(cc.vv.const.DEFAULT_HEAD_AVATAR_FRAME_NAME);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n\r\n            // 设置为默认头像\r\n\r\n            // 防止重复刷新头像\r\n            if (typeof sprite.avatarUrl !== 'undefined'\r\n                && sprite.avatarUrl === cc.vv.const.DEFAULT_HEAD_AVATAR_FRAME_NAME) {\r\n                return;\r\n            }\r\n\r\n            sprite.spriteFrame = cc.vv.atlas.main.getSpriteFrame(cc.vv.const.DEFAULT_HEAD_AVATAR_FRAME_NAME);\r\n        }\r\n    },\r\n\r\n    // createImage(sprite, avatarUrl) {\r\n    //     if (cc.vv.wxHelper.iswxPlatform()) {\r\n\r\n    //     } else {\r\n\r\n    //     }\r\n\r\n    // },\r\n\r\n    createPrefabByUrl(url, parent, cb) {\r\n        cc.loader.loadRes(url,\r\n            function (completedCount, totalCount, item) {\r\n                if (cc.vv.loading) {\r\n                    cc.vv.loading.updateView(completedCount, totalCount);\r\n                }\r\n            },\r\n            function (err, prefab) {\r\n                var node = cc.instantiate(prefab);\r\n                if (parent == null) {\r\n                    cc.find(\"Canvas\").addChild(node);\r\n                } else {\r\n                    parent.addChild(node);\r\n                }\r\n                if (typeof cb == \"function\") {\r\n                    cb(node);\r\n                }\r\n            },\r\n        );\r\n    },\r\n\r\n    // createLoadResProgress () {\r\n    //     cc.loader.loadRes(\"prefabs/load_progress\",function (err, prefab) {\r\n    //         let node = cc.instantiate(prefab);\r\n    //         cc.director.getScene().getChildByName(\"Canvas\").addChild(node, 1);\r\n    //         node.active = false;\r\n    //     });\r\n    // },\r\n    //releaseResource (url, type) {\r\n    // var res = cc.loader.getRes(url, type);\r\n    // var all = cc.loader.getDependsRecursively(res);\r\n    // cc.loader.release(all);\r\n\r\n    // cc.loader.release(cc.loader.getDependsRecursively(this.messageBox));\r\n    // cc.loader.release(cc.loader.getDependsRecursively(this.reconnectionAnims));\r\n    // cc.loader.release(cc.loader.getDependsRecursively(this.settingUI));\r\n    // cc.loader.release(cc.loader.getDependsRecursively(this.createRoomUI));\r\n    //}\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n\r\n    // 显示确认对话框\r\n    showDialogOK(message, okCallback, bUseRichText, alignH, okBtnTextSpr) {\r\n\r\n        console.log('[Utils.showDialogOK] message = ' + message);\r\n\r\n        cc.loader.loadRes(\"prefabs/dialog\", function (err, prefab) {\r\n\r\n            if (err) {\r\n                console.log('[Utils.showDialogOK] load callback');\r\n                console.log(err);\r\n            }\r\n            else {\r\n                var bRichText = (\"undefind\" === bUseRichText) ? false : bUseRichText;\r\n                alignH = (null == alignH) ? cc.vv.enum.EnumLabelHorizontalAlign.CENTER : alignH;\r\n                var curscene = cc.director.getScene();\r\n                var dialog = cc.instantiate(prefab);\r\n                dialog.getComponent('Dialog').init(message, bRichText, true, false, true, okCallback, null, alignH, null, okBtnTextSpr);\r\n                dialog.parent = curscene.children[0];\r\n            }\r\n        });\r\n    },\r\n\r\n    // 显示取消对话框\r\n    showDialogCancel(message, cancelCallback, bUseRichText, cancelBtnTextSpr) {\r\n\r\n        console.log('[Utils.showDialogCancel] message = ' + message);\r\n\r\n        cc.loader.loadRes(\"prefabs/dialog\", function (err, prefab) {\r\n\r\n            if (err) {\r\n                console.log('[Utils.showDialogCancel] load callback');\r\n                console.log(err);\r\n            }\r\n            else {\r\n                var bRichText = ('undefined' === bUseRichText) ? false : bUseRichText;\r\n                var curscene = cc.director.getScene();\r\n                var dialog = cc.instantiate(prefab);\r\n                dialog.getComponent('Dialog').init(message, bRichText, false, true, true, null, cancelCallback, null, null, null, cancelBtnTextSpr);\r\n                dialog.parent = curscene.children[0];\r\n            }\r\n        });\r\n    },\r\n\r\n    // 显示确定与取消对话框\r\n    showDialogOKCancel(message, okCallback, cancelCallback, bUseRichText, alignH, callback) {\r\n\r\n        console.log('[Utils.showDialogOKCancel] message = ' + message);\r\n\r\n        cc.loader.loadRes(\"prefabs/dialog\", function (err, prefab) {\r\n\r\n            if (err) {\r\n                console.log('[Utils.showDialogOKCancel] load callback');\r\n                console.log(err);\r\n            }\r\n            else {\r\n                var bRichText = ('undefined' === bUseRichText) ? false : bUseRichText;\r\n                alignH = (\"undefind\" === alignH) ? cc.vv.enum.EnumLabelHorizontalAlign.CENTER : alignH;\r\n                var curscene = cc.director.getScene();\r\n                var dialog = cc.instantiate(prefab);\r\n                dialog.getComponent('Dialog').init(message, bRichText, true, true, true, okCallback, cancelCallback, alignH, callback);\r\n                dialog.parent = curscene.children[0];\r\n            }\r\n        });\r\n    },\r\n\r\n    // 显示确定对话框（有关闭按钮事件）\r\n    showDialogOKOnly(message, okCallback, bUseRichText, zIndex) {\r\n\r\n        console.log('[Utils.showDialogOKCancel] message = ' + message);\r\n\r\n        cc.loader.loadRes(\"prefabs/dialog\", function (err, prefab) {\r\n\r\n            if (err) {\r\n                console.log('[Utils.showDialogOKCancel] load callback');\r\n                console.log(err);\r\n            }\r\n            else {\r\n                var bRichText = ('undefined' === bUseRichText) ? false : bUseRichText;\r\n                var curscene = cc.director.getScene();\r\n                var dialog = cc.instantiate(prefab);\r\n                dialog.getComponent('Dialog').init(message, bRichText, true, false, false, okCallback, null);\r\n                dialog.parent = curscene.children[0];\r\n                if (zIndex != null) {\r\n                    dialog.zIndex = zIndex;\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    // 显示飘窗\r\n    showFlyTip: function (str, cb) {\r\n        console.log('[Utils.showFlyTip] str = ' + str);\r\n\r\n        cc.loader.loadRes(\"prefabs/fly_tip_node\", function (err, prefab) {\r\n            if (err) {\r\n                console.log('[Utils.showFlyTip] load callback');\r\n                console.log(err);\r\n            } else {\r\n                var scene = cc.director.getScene();\r\n                var flyTipNode = cc.instantiate(prefab);\r\n                flyTipNode.parent = scene;\r\n                flyTipNode.getComponent('FlyTip').updateTip(str);\r\n                if (typeof cb == \"function\") {\r\n                    cb();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    //时间戳转换\r\n    getTimeStampToNow(date, symbol, dateType) {\r\n        var date = new Date(date * 1000);//如果date为10位不需要乘1000\r\n        var Y = date.getFullYear() + symbol[0];\r\n        var M = (date.getMonth() + 1 < 10 ? +(date.getMonth() + 1) : date.getMonth() + 1) + symbol[1];\r\n        var D = (date.getDate() < 10 ? + (date.getDate()) : date.getDate()) + symbol[2];\r\n        var h = \" \" + (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\r\n        var m = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\r\n        var s = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());\r\n        if (dateType === \"ALL\") {\r\n            return Y + M + D + h + m + s;\r\n        }\r\n        if (dateType === \"YMD\") {\r\n            return Y + M + D;\r\n        }\r\n        if (dateType === \"MD\") {\r\n            return M + D;\r\n        }\r\n        if (dateType === \"HMS\") {\r\n            return h + m + s;\r\n        }\r\n    },\r\n\r\n    // 时间戳转换\r\n    // @param stamp: 时间戳\r\n    // @param needDateStr: 需要的数据数组：'yMdHms'\r\n    // @param symbolType: 间隔符，不传值默认显示“年月日时分秒”\r\n    getStrByTimeStamp(stamp, needDateStr, symbolType) {\r\n        var bUseDefault = true;\r\n        var symbolArr = [cc.vv.lan.MATCH_LAN[22], cc.vv.lan.MATCH_LAN[23], cc.vv.lan.MATCH_LAN[24], cc.vv.lan.MATCH_LAN[25], cc.vv.lan.MATCH_LAN[2], cc.vv.lan.MATCH_LAN[3]];\r\n        if ('undefined' !== typeof symbolType && null != symbolType) {\r\n            symbolArr = [symbolType, symbolType, '', ':', ':', ''];\r\n            bUseDefault = false;\r\n        }\r\n\r\n        var time = new Date(stamp * 1000);\r\n        var timeObj = {};\r\n        timeObj.y = time.getFullYear();\r\n        timeObj.M = (time.getMonth() + 1 < 10) ? '0' + (time.getMonth() + 1) : time.getMonth() + 1;\r\n        timeObj.d = (time.getDate() < 10) ? '0' + time.getDate() : time.getDate();\r\n        timeObj.H = (time.getHours() < 10) ? '0' + time.getHours() : time.getHours();\r\n        timeObj.m = (time.getMinutes() < 10) ? '0' + time.getMinutes() : time.getMinutes();\r\n        timeObj.s = (time.getSeconds() < 10) ? '0' + time.getSeconds() : time.getSeconds();\r\n\r\n        var dateStr = '';\r\n        var allStr = 'yMdHms';\r\n        for (var i = 0; i < needDateStr.length; i++) {\r\n            if ('H' == needDateStr[i] && i > 0) {\r\n                dateStr += ' ';\r\n            }\r\n\r\n            dateStr += timeObj[needDateStr[i]];\r\n\r\n            if (i + 1 < needDateStr.length || bUseDefault) {\r\n                var index = allStr.indexOf(needDateStr[i]);\r\n                dateStr += symbolArr[index];\r\n            }\r\n        }\r\n\r\n        return dateStr;\r\n    },\r\n\r\n    // 普通邀请分享，带邀请链接\r\n    shareGame(title, imgUrl, witchShareTicket, matchId, sceneID) {\r\n        if (cc.vv.wxHelper.iswxPlatform()) {\r\n            if (matchId != null) {\r\n                var query = 'inviterId=' + cc.vv.myself.playerId + '&inviterName=' + cc.vv.myself.playerName + '&inviterMatchId=' + cc.vv.matchData.matchId + '&inviterSceneID=' + sceneID;\r\n            } else {\r\n                var query = 'inviterId=' + cc.vv.myself.playerId + '&inviterName=' + cc.vv.myself.playerName + '&inviterSceneID=' + sceneID;\r\n            }\r\n            var title = title;\r\n            var imgUrl = imgUrl;\r\n            if (title == null && imgUrl == null) {\r\n                title = cc.vv.lan.SHARE_TITLE_GAME;\r\n                imgUrl = cc.vv.const.WX_SHARE_GAME_URL;\r\n            }\r\n            if (witchShareTicket != null) {\r\n                cc.vv.wxHelper.updateShareMenu(witchShareTicket, function () {\r\n                    cc.vv.wxHelper.shareAppMessageQuery(title, imgUrl, query, null, null, sceneID);\r\n                });\r\n            } else {\r\n                cc.vv.wxHelper.updateShareMenu(false, function () {\r\n                    cc.vv.wxHelper.shareAppMessageQuery(title, imgUrl, query, null, null, sceneID);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            console.log('not wx platform.');\r\n        }\r\n    },\r\n\r\n    // 比赛奖励分享，带邀请链接\r\n    shareAward(witchShareTicket, sceneID) {\r\n        if (cc.vv.wxHelper.iswxPlatform()) {\r\n            var query = 'inviterId=' + cc.vv.myself.playerId + '&inviterName=' + cc.vv.myself.playerName + '&inviterSceneID=' + sceneID;\r\n            if (witchShareTicket != null) {\r\n                cc.vv.wxHelper.updateShareMenu(witchShareTicket, function () {\r\n                    cc.vv.wxHelper.shareAppMessageQuery(cc.vv.lan.SHARE_TITLE_AWARD, cc.vv.const.WX_SHARE_AWARD_URL, query, null, null, sceneID);\r\n                });\r\n            } else {\r\n                cc.vv.wxHelper.updateShareMenu(false, function () {\r\n                    cc.vv.wxHelper.shareAppMessageQuery(cc.vv.lan.SHARE_TITLE_AWARD, cc.vv.const.WX_SHARE_AWARD_URL, query, null, null, sceneID);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            console.log('not wx platform.');\r\n        }\r\n    },\r\n\r\n    //带回调的分享\r\n    shareGameWithCallBackEvent(title, imgUrl, witchShareTicket, successback, failback, sceneID) {\r\n        if (cc.vv.wxHelper.iswxPlatform()) {\r\n            var query = 'inviterId=' + cc.vv.myself.playerId + '&inviterName=' + cc.vv.myself.playerName + '&inviterSceneID=' + sceneID;\r\n            var _shareTicket = false;\r\n            if (witchShareTicket != null) {\r\n                _shareTicket = witchShareTicket;\r\n            }\r\n            cc.vv.wxHelper.updateShareMenu(_shareTicket, function () {\r\n                cc.vv.wxHelper.shareAppMessageQuery(title, imgUrl, query, successback, failback, sceneID);\r\n            });\r\n        } else {\r\n            console.log('not wx platform.');\r\n        }\r\n    },\r\n\r\n    //分享到群查看群排行\r\n    shareGroupRankEvent(title, imgUrl, sceneID) {\r\n        if (cc.vv.wxHelper.iswxPlatform()) {\r\n            console.log(\"shareGroupRankEvent\");\r\n            //这里加上分享类型 inviterInitType属性表示是否主动拉起界面 inviterInitModule属性表示主动拉起的界面的枚举\r\n            var query = 'inviterId=' + cc.vv.myself.playerId + '&inviterName=' + cc.vv.myself.playerName + '&inviterInitType=' + 1 + '&inviterInitModule=' + cc.vv.enum.EnumInitView.EIV_GROUP + '&inviterSceneID=' + sceneID;\r\n            var title = title;\r\n            var imgUrl = imgUrl;\r\n            if (title == null && imgUrl == null) {\r\n                title = cc.vv.lan.SHARE_TITLE_GAME;\r\n                imgUrl = cc.vv.const.WX_SHARE_GAME_URL;\r\n            }\r\n            cc.vv.wxHelper.updateShareMenu(true, function () {\r\n                cc.vv.wxHelper.shareAppMessageQuery(title, imgUrl, query, null, null, sceneID);\r\n            });\r\n        }\r\n        else {\r\n            console.log('not wx platform.');\r\n        }\r\n    },\r\n\r\n    getSubstringDataByLength(str, maxLen, subLen) {\r\n        if (maxLen == null) {\r\n            maxLen = cc.vv.const.SUBSTRING_MAXLENGTH;\r\n        }\r\n        if (subLen == null) {\r\n            subLen = cc.vv.const.SUBSTRING_LENGTH;\r\n        }\r\n        var newArr = [];\r\n        var totalLength = 0;\r\n        var list = str.split(\"\");\r\n        if (this.getStringDataLength(str) <= maxLen) {\r\n            return str;\r\n        } else {\r\n            for (var i = 0; i < str.length; i++) {\r\n                var strI = list[i];\r\n                if (totalLength < subLen) {\r\n                    if (strI.match(/[\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7B-\\x7F]/g)) {\r\n                        //console.log(\"半角符号\");\r\n                        totalLength += 0.5;\r\n                    }\r\n                    else if (strI.match(/[^\\x00-\\xff]/g)) {\r\n                        //console.log(\"双字节符号\");\r\n                        totalLength += 2;\r\n                    }\r\n                    else if (strI.match(/^[a-zA-Z\\d]+$/g)) {\r\n                        //console.log(\"字母数字\");\r\n                        totalLength += 1;\r\n                    }\r\n                    newArr.push(strI);\r\n                }\r\n            }\r\n            return newArr.join(\"\") + \"...\";\r\n        }\r\n    },\r\n\r\n    getStringDataLength(str) {\r\n        var totalLength = 0;\r\n        var list = str.split(\"\");\r\n        for (var i = 0; i < str.length; i++) {\r\n            var strI = list[i];\r\n            if (strI.match(/[\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7B-\\x7F]/g)) {\r\n                totalLength += 0.5;\r\n            }\r\n            else if (strI.match(/[^\\x00-\\xff]/g)) {\r\n                totalLength += 2;\r\n            }\r\n            else if (strI.match(/^[a-zA-Z\\d]+$/g)) {\r\n                totalLength += 1;\r\n            }\r\n        }\r\n        return totalLength;\r\n    },\r\n\r\n    getWeightArr(arr) { //数组去重\r\n        var newArr = [];\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (newArr.indexOf(arr[i]) == -1)\r\n                newArr.push(arr[i]);\r\n        }\r\n        return newArr;\r\n    },\r\n\r\n    getTimeStampByString(date) { // 字符串类型时间 转换成时间戳\r\n        var newDate = date.replace(/-/g, '/'); //兼容ios不能转换  2018-12-12  等格式日期\r\n        return Date.parse(newDate) / 1000;\r\n    },\r\n\r\n    // 显示引导遮罩\r\n    showGuideNode: function (dataObj) {\r\n        cc.loader.loadRes(\"prefabs/guide_node\", function (err, prefab) {\r\n            var guideNode = cc.instantiate(prefab);\r\n            guideNode.zIndex = 1000;\r\n            guideNode.parent = cc.find(\"Canvas\");\r\n            guideNode.active = true;\r\n            guideNode.getComponent('GuideNode').init(dataObj);\r\n        });\r\n    },\r\n\r\n    //强制保留位数\r\n    toDecimalByLen(x, len) {\r\n        if (len == null) {\r\n            len = cc.vv.const.HOLDNUM_LEN;\r\n        }\r\n        var f = parseFloat(x);\r\n        if (isNaN(f)) {\r\n            return false;\r\n        }\r\n        var roundNum = Math.pow(10, len);\r\n        var f = Math.floor(x * roundNum) / roundNum;\r\n        var s = f.toString();\r\n        var rs = s.indexOf('.');\r\n        if (rs < 0) {\r\n            rs = s.length;\r\n            s += '.';\r\n        }\r\n        while (s.length <= rs + len) {\r\n            s += '0';\r\n        }\r\n        return s;\r\n    },\r\n\r\n    // 获取金币场金币显示\r\n    getGoldShow: function (num) {\r\n        if (num > 99999 && num < 100000000) {\r\n            var tmpNum = num / 10000;\r\n            var fewNum = cc.vv.utils.getDigit(tmpNum);\r\n            if (0 != fewNum) {\r\n                if (num < 100000) {\r\n                    num = this.toDecimalByLen(tmpNum, 3) + cc.vv.lan.MATCH_LAN[109];\r\n                } else if (num >= 100000 && num < 1000000) {\r\n                    num = this.toDecimalByLen(tmpNum, 2) + cc.vv.lan.MATCH_LAN[109];\r\n                } else if (num >= 1000000 && num < 10000000) {\r\n                    num = this.toDecimalByLen(tmpNum, 1) + cc.vv.lan.MATCH_LAN[109];\r\n                } else if (num >= 10000000) {\r\n                    num = Math.floor(tmpNum) + cc.vv.lan.MATCH_LAN[109];\r\n                }\r\n            } else {\r\n                num = tmpNum + cc.vv.lan.MATCH_LAN[109];\r\n            }\r\n        } else if (num >= 100000000) {\r\n            var tmpNum = num / 100000000;\r\n            var fewNum = cc.vv.utils.getDigit(tmpNum);\r\n            if (0 != fewNum) {\r\n                if (num < 1000000000) {\r\n                    num = this.toDecimalByLen(tmpNum, 3) + cc.vv.lan.MATCH_LAN[129];\r\n                } else if (num >= 1000000000 && num < 10000000000) {\r\n                    num = this.toDecimalByLen(tmpNum, 2) + cc.vv.lan.MATCH_LAN[129];\r\n                } else if (num >= 10000000000 && num < 100000000000) {\r\n                    num = this.toDecimalByLen(tmpNum, 1) + cc.vv.lan.MATCH_LAN[129];\r\n                } else if (num >= 100000000000) {\r\n                    num = Math.floor(tmpNum) + cc.vv.lan.MATCH_LAN[129];\r\n                }\r\n            } else {\r\n                num = tmpNum + cc.vv.lan.MATCH_LAN[129];\r\n            }\r\n        }\r\n        return num;\r\n    },\r\n\r\n    // 判断几位小数\r\n    getDigit: function (num) {\r\n        var floorNum = Math.floor(num);\r\n        var fewNum = 0;\r\n        var integerNum = 0; // 整数\r\n        var decimalNum = num - floorNum; // 小数\r\n        if (0 != decimalNum) {\r\n            for (let i = 0; i < 3; i++) {\r\n                decimalNum = decimalNum * 10;\r\n                var tmp = (decimalNum.toString()).split('.');\r\n                integerNum = tmp[0];\r\n                decimalNum = tmp[1];\r\n                if (0 != decimalNum) {\r\n                    fewNum += 1;\r\n                } else {\r\n                    if (0 != integerNum) {\r\n                        fewNum += 1;\r\n                    }\r\n                    return fewNum;\r\n                }\r\n            }\r\n        }\r\n\r\n        return fewNum;\r\n    },\r\n\r\n    // 关闭其他界面回到大厅\r\n    returnToHall: function () {\r\n        var initArr = cc.find('Canvas').getComponent('Match')._initChildNameArr;\r\n        var childArr = cc.find('Canvas').children;\r\n        for (let i = childArr.length - 1; i >= 0; i--) {\r\n            var bFind = false;\r\n            for (let j = 0; j < initArr.length; j++) {\r\n                if (childArr[i].name == initArr[j] || 'mj_battle_node' == childArr[i].name) {\r\n                    bFind = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!bFind) {\r\n                childArr[i].destroy();\r\n            }\r\n        }\r\n    },\r\n\r\n    // 秒数转换为倒计时 00:00:00\r\n    secondToCountDown(totalSecond) {\r\n\r\n        var h = Math.floor(totalSecond / 3600);\r\n        var m = Math.floor((totalSecond % 3600) / 60);\r\n        var s = ((totalSecond % 3600) % 60);\r\n\r\n        var str = '';\r\n        str += (h < 10) ? '0' + h : h;\r\n        str += ':';\r\n        str += (m < 10) ? '0' + m : m;\r\n        str += ':';\r\n        str += (s < 10) ? '0' + s : s;\r\n\r\n        return str;\r\n    },\r\n\r\n    // 获取任意范围的随机整数[min, max]\r\n    getRandomInt: function (min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    },\r\n\r\n    // 判断如果上万则取万位以上的值\r\n    getTenThousandBesidesValue(num) {\r\n        if (num > 10000) {\r\n            return num / 10000;\r\n        } else {\r\n            return num;\r\n        }\r\n    },\r\n    // 判断当前画布是否有当前节点\r\n    getNodeByName(node) {\r\n        var nodeTab = [];\r\n        if (cc.find(\"Canvas\").getChildByName(node)) {\r\n            nodeTab.bool = true;\r\n            nodeTab.view = cc.find(\"Canvas\").getChildByName(node);\r\n            return nodeTab;\r\n        }\r\n        else {\r\n            nodeTab.bool = false;\r\n            return nodeTab;\r\n        }\r\n    },\r\n\r\n    //播放窗体关闭动画  并销毁节点\r\n    closeViewFunction(target) {\r\n        target.getComponent(cc.Animation).on('finished', function () {\r\n            target.destroy();\r\n        });\r\n        target.getComponent(cc.Animation).play(\"close_view\");\r\n    },\r\n\r\n    //当前时间戳\r\n    getNowTimeStamp: function () {\r\n        return Date.parse(new Date()) / 1000;\r\n    },\r\n\r\n    //通过位数加点（默认按三位为一个单位）\r\n    //nDigit 位数\r\n    getPointNum: function (nNum, nDigit) {\r\n        nDigit = nDigit || 3;\r\n\r\n\r\n        let nUnit = 1;\r\n        var sSplicing = \"\";\r\n        for (let index = 0; index < nDigit; index++) {\r\n            nUnit = nUnit * 10;\r\n        }\r\n        let nTempNum = 0;\r\n        for (let idx = 1; idx > 0; idx++) {\r\n            if (nNum / nUnit >= 1) {\r\n                nTempNum = (Array(3).join(0) + (nNum % nUnit)).slice(-3);\r\n                if (sSplicing != \"\") {\r\n                    sSplicing = nTempNum + ',' + sSplicing;\r\n                } else {\r\n                    sSplicing = nTempNum\r\n                }\r\n\r\n                nNum = Math.floor(nNum / nUnit)\r\n            } else {\r\n                if (nNum != 0) {\r\n                    if (sSplicing != \"\") {\r\n                        sSplicing = nNum + ',' + sSplicing;\r\n                    } else {\r\n                        sSplicing = nNum\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        if (sSplicing == \"\") {\r\n            sSplicing = '0'\r\n        }\r\n        return sSplicing;\r\n    },\r\n\r\n    getBestRecord () {\r\n        if (cc.DataUser.gameStatus === cc.GameStatus.Win) {\r\n            if (!cc.DataUser.bestRecord) {\r\n                cc.DataUser.bestRecord = cc.DataUser.currentRecord;\r\n            }\r\n            else {\r\n                cc.DataUser.bestRecord = cc.DataUser.bestRecord > cc.DataUser.currentRecord ? cc.DataUser.currentRecord : cc.DataUser.bestRecord; \r\n            }\r\n        }\r\n        return cc.DataUser.bestRecord;\r\n    },\r\n\r\n    getTimeString (date) {\r\n        let dateString = null;\r\n        var second = 0, minute = 0, hour = 0;\r\n        var secondStr = null, minuteStr = null, hourStr = null;\r\n        if (0 <= date && date < 60) {\r\n            secondStr = second = date;\r\n        }\r\n        else if (60 <= date && date < 3600) {\r\n            secondStr = second = date % 60;\r\n            minuteStr = minute = Math.floor(date / 60);\r\n        }\r\n        else if (3600 <= date && date < 360000) {\r\n            secondStr = second = date % 60;\r\n            minuteStr = minute = Math.floor(date / 60) % 60;\r\n            hourStr = hour = Math.floor(date / 3600);\r\n        }\r\n        else {\r\n            return cc.GameLanguage.zhLanguage[8];\r\n        }\r\n        if (second < 10) {\r\n            secondStr = \"0\" + second;\r\n        }\r\n        if (minute < 10) {\r\n            minuteStr = \"0\" + minute;\r\n        }\r\n        if (hour < 10) {\r\n            hourStr = \"0\" + hour;\r\n        }\r\n        return cc.GameLanguage.zhLanguage[5].format(hourStr, minuteStr, secondStr);\r\n    },\r\n\r\n    //生成从minNum到maxNum的随机数\r\n    randomNum(minNum,maxNum){ \r\n        switch(arguments.length){ \r\n            case 1: \r\n                return parseInt(Math.random()*minNum+1,10); \r\n            break; \r\n            case 2: \r\n                return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10); \r\n            break; \r\n                default: \r\n                    return 0; \r\n                break; \r\n        } \r\n    } \r\n};\r\nmodule.exports = Utils;\r\ncc.Utils = Utils;"]}