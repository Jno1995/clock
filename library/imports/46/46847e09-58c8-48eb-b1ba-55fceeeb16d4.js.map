{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\contorl/assets\\scripts\\contorl\\AudioMgr.js"],"names":["AudioMgr","bgmVolume","sfxVolume","bgmswitch","sfxswitch","bgmAudioID","sfxAudioID","bgm_v","sfx_v","init","setting","cc","vv","localData","sound_volum","sfx_volum","sound_switch","sfx_switch","console","log","getUrl","url","raw","playBGM","audioUrl","audioEngine","play","playEffect","setSFXVolume","v","force","setVolume","setBGMVolume","playClickedBgm","getBGMState","getState","stopBGM","stop","module","exports"],"mappings":"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","file":"AudioMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\contorl","sourcesContent":["const AudioMgr = {\r\n    bgmVolume: 0.8,\r\n    sfxVolume: 0.8,\r\n    //开关\r\n    bgmswitch: 1,\r\n    sfxswitch: 1,\r\n\r\n    bgmAudioID: -1,\r\n    sfxAudioID: -1,\r\n\r\n    bgm_v: 0,\r\n    sfx_v: 0,\r\n\r\n    init: function () {\r\n        var setting = cc.vv.localData.setting;\r\n        this.bgmVolume = setting.sound_volum;\r\n        this.sfxVolume = setting.sfx_volum;\r\n        this.bgmswitch = setting.sound_switch;\r\n        this.sfxswitch = setting.sfx_switch;\r\n        console.log(setting.sound_volum);\r\n        console.log(setting.sound_switch + '音量开关');\r\n        console.log(setting.sfx_volum);\r\n        console.log(setting.sfx_switch + '音效开关');\r\n    },\r\n\r\n    getUrl: function (url) {\r\n        return cc.url.raw(\"resources/audio/\" + url);\r\n    },\r\n\r\n    playBGM() {\r\n        if (cc.vv.localData.setting.sound_switch == 0) {\r\n            return;\r\n        }\r\n        if (this.bgmAudioID == -1) {\r\n            var audioUrl = this.getUrl(\"background.mp3\");\r\n            this.bgmAudioID = cc.audioEngine.play(audioUrl, true, cc.vv.localData.setting.sound_volum);\r\n        }\r\n    },\r\n\r\n    // 播放音效\r\n    playEffect: function (url) {\r\n        if (cc.vv.localData.setting.sfx_switch == 1) {\r\n            if (null != url) {\r\n                this.sfxAudioID = cc.audioEngine.play(cc.url.raw(url), false, this.sfxVolume);\r\n            }\r\n        }\r\n    },\r\n\r\n    setSFXVolume: function (v, force) {\r\n        if (this.sfxVolume != v || force) {\r\n            this.sfxVolume = v;\r\n            cc.audioEngine.setVolume(this.sfxAudioID, v);\r\n        }\r\n    },\r\n\r\n    setBGMVolume: function (v, force) {\r\n        if (this.bgmVolume != v || force) {\r\n\r\n            this.bgmVolume = v;\r\n            cc.audioEngine.setVolume(this.bgmAudioID, v);\r\n\r\n        }\r\n    },\r\n\r\n    playClickedBgm() {\r\n        if (cc.vv.localData.setting.sfx_switch != 1) {\r\n\r\n        } else {\r\n            this.playEffect(\"resources/audio/button_click.mp3\");\r\n        }\r\n    },\r\n\r\n    getBGMState() {\r\n        return cc.audioEngine.getState(this.bgmAudioID);\r\n    },\r\n\r\n    stopBGM() {\r\n        if (this.bgmAudioID != -1) {\r\n            cc.audioEngine.stop(this.bgmAudioID);\r\n            this.bgmAudioID = -1;\r\n        }\r\n    },\r\n};\r\nmodule.exports = AudioMgr;\r\n"]}