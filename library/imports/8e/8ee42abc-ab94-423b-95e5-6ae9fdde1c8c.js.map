{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNetMgr.js"],"names":["cc","Class","extends","Component","properties","dataEventHandler","roomData","matchData","reconnectAnims","dispatchEvent","event","data","emit","init","DRoom","DMatch","initEventHandlers","self","vv","gameEvent","addEventHandler","EVENT_WSS_OPEN","tryReconnectLogicServer","EVENT_WSS_CLOSED","EVENT_ENTER_FOREGROUND","audioMgr","playBGM","socketMgr","checkNetState","EVENT_ENTER_BACKGROUND","stopBGM","EVENT_AUDIO_INTERRUPTION_BEGIN","EVENT_AUDIO_INTERRUPTION_END","wxHelper","_queryData","inviterId","inviterName","parseInt","inviterMatchId","pw","PacketWriter","writeid","packid","PACKETID_210","writeu8","writes","writeu4","bufferPack","getdata","console","log","lan","FZMJ_NOTIVE","language","length","substr","fixlan","JSON","parse","k","v","klen","idx","lastIndexOf","front","substring","back","const","fixconst","Number","resultCode","gameNetMgr","seatIndex","zhuangIndex","EVENT_ROOM_CLOSED","readPacket309","EVENT_ROOM_VOTE_DISBAND","readPacket310","EVENT_GAME_DISBAND_SETTLEMENT","gameBegin","utils","showDialogOK","FZMJ_LAN","clean","EVENT_INTERACTIVE","readPacket401","EVENT_GAME_BEGIN","readPacket402","EVENT_MJ_NEWCMD","pindex","EVENT_MJ_CMDRESPOND","pai","type","value","MJTYPE_MULTI","doMOPAI","direction","doOptResult","readPacket407","EVENT_GAME_SETTLEMENT","readPacket410","EVENT_MEMBER_CHANGE","doKAIJIN","readPacket413","EVENT_MJ_MOON","readPacket434","EVENT_MJ_GOLDCAMP","playerId","myself","autoState","bAutomatic","EVENT_AUTOMATIC_CHANGED","readPacket951","readPacket953","EVENT_MATCH_STATE_CHANGED","state","readPacket956","readPacket958","gamePrepareShareArr","readPacket959","EVENT_MATCH_AWARD_SHARE","push","curScore","fuelValue","gamePrepareShareLen_child","largessGoldValue","gold","goldFieldId","goldGameID","goldFieldState","goldPlayerEnterId","readPacket1007","i","goldGameNum_child","gameid","onlineNum","playerNum","goldFieldOnlines","readPacket1010","redPacketTag","MATCH_LAN","format","ticketAward","node","destroy","enum","EnumLabelHorizontalAlign","CENTER","goldMatchInfoLen","infoData","goldMatchInfoLen_child","goldMatchPacketValueArr","awardBonus","goldMatchType","EnumGoldGameType","EGGT_LOW","sprogGoldMatchTimes","playedTimes","EGGT_MIDDLE","richGoldMatchTimes","EGGT_HIGHT","masterGoldMatchTimes","isFreeGold","goldMangerArr","GOLD_RISING_POURING","GOLD_ENTER_CONDITION","goldMatchOpenIDArr","goldMatchLen_child","goldMatchLen","castBottom","min","lowerLimit","max","superiorLimit","isOpen","MJOPT_NAME","option","opt","pai1","pai1_type","pai1_value","pai2","pai2_type","pai2_value","pai3","pai3_type","pai3_value","EnumCmdType","MJOPT_BUHUA","huas","bupais","kaiju","z_isFirstBuhua","optionHua_child","huaCard_Num_child","huaCard_type","huaCard_value","putCard_Num_child","putCard_type","putCard_value","doBUHUA","MJOPT_CHI","doCHI","MJOPT_PENG","doPENG","MJOPT_GANG","doGANG","MJOPT_ANGANG","doANGANG","MJOPT_JIAGANG","doJIAGANG","MJOPT_DA","lastDAIndex","doDA","MJOPT_GUO1","MJOPT_DA_T","MJOPT_GUO2","MJOPT_TING","doTING","king","goldType","goldValue","seatData","seats","flowerNum_child","huapai","oldNum","remainCard","subRemainCard","newNum","EVENT_MJ_KAIJIN","huacount","myseatIndex","holds","indexOf","splice","EVENT_MJ_BUHUA","chis","EVENT_MJ_CHI","pengs","EVENT_MJ_PENG","ag","gangs","EVENT_MJ_GANG","angangs","EVENT_MJ_ANGANG","pengidx","EVENT_MJ_JIAGANG","folds","EVENT_MJ_DA","EVENT_MJ_TING","EVENT_MJ_MOPAI","sendPlayerCmdExcute","cmdcode","mjid1","mjid2","chiIndex","choice","pt1","pv1","pt2","pv2","Math","floor","PACKETID_403","writeu1","connectGameServer","dissoveData","net","ip","port","onConnectOK","sd","token","roomid","time","sign","send","onConnectFailed","wc","hide","show","connect","sendVoteDisband","isAgree","PACKETID_305","sendDisband","PACKETID_304","bNeedLoad","PACKETID_104","onRequestPlayerInfoEvent","PACKETID_208"],"mappings":"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","file":"GameNetMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["// var DRoom = require(\"DRoom\");\r\n// var DMatch = require(\"DMatch\");\r\n// var PacketWriter = require(\"PacketWriter\");\r\n\r\n// 战斗事件类\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dataEventHandler: null,\r\n        roomData: null,\r\n        matchData: null,\r\n        reconnectAnims: null,\r\n    },\r\n\r\n    dispatchEvent(event, data) {\r\n        if (this.dataEventHandler) {\r\n            this.dataEventHandler.emit(event, data);\r\n        }\r\n    },\r\n\r\n    init() {\r\n\r\n        this.roomData = new DRoom();\r\n        this.matchData = new DMatch();\r\n        this.initEventHandlers();\r\n    },\r\n\r\n    initEventHandlers() {\r\n\r\n        var self = this;\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_WSS_OPEN, function () {\r\n            // if (self.reconnectAnims != null) {\r\n            //     self.reconnectAnims.destroy();\r\n            //     self.reconnectAnims = null;\r\n            // }\r\n            // 链接成功之后，如果玩家id>0表示重连\r\n            self.tryReconnectLogicServer();\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_WSS_CLOSED, function () {\r\n            // if (self.reconnectAnims == null) {\r\n            //     cc.loader.loadRes(cc.vv.const.URL_RECONNECTION_ANIMS, function (err, prefab) {\r\n            //         self.reconnectAnims = cc.instantiate(prefab);\r\n            //         cc.director.getScene().getChildByName(\"Canvas\").addChild(self.reconnectAnims);\r\n            //     });\r\n            // }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_ENTER_FOREGROUND, function (data) {\r\n            cc.vv.audioMgr.playBGM();\r\n            cc.vv.socketMgr.checkNetState(); // 检测网络状态\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_ENTER_BACKGROUND, function (data) {\r\n            cc.vv.audioMgr.stopBGM();\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_AUDIO_INTERRUPTION_BEGIN, function (data) {\r\n            cc.vv.audioMgr.stopBGM();\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(cc.vv.gameEvent.EVENT_AUDIO_INTERRUPTION_END, function (data) {\r\n            cc.vv.audioMgr.playBGM();\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_104\", function (data) {\r\n            // console.log(data);\r\n            if (data['resultCode'] == 0) {\r\n\r\n                // 单场景 不需要切换\r\n\r\n                // var curSceneName = cc.director.getScene().name;\r\n\r\n                // switch (data['currentStatus']) {\r\n                //     case 1:\r\n                //         if (!cc.vv.gameNetMgr.roomData.bDuringSettlement) {\r\n                //             if (curSceneName != 'match'){\r\n                //                 cc.director.loadScene('match');\r\n                //             }\r\n                //         }\r\n                //         break;\r\n                //     case 2:\r\n                //     case 3:\r\n                //     case 4:\r\n                //         if (curSceneName != 'match'){\r\n                //             cc.director.loadScene('match');\r\n                //         }\r\n                //         break;\r\n                //     default:\r\n                //         console.log('_PACKET_104 status error');\r\n                //         break;\r\n                // }\r\n\r\n                if (cc.vv.wxHelper._queryData != null) {\r\n                    var data = cc.vv.wxHelper._queryData;\r\n                    if (\"undefined\" !== typeof data\r\n                        && \"undefined\" !== typeof data.inviterId\r\n                        && \"undefined\" !== typeof data.inviterName) {\r\n                        var inviterId = parseInt(data.inviterId);\r\n                        var inviterName = data.inviterName;\r\n                        var inviterMatchId = data.inviterMatchId;\r\n                        var pw = new PacketWriter();\r\n                        pw.writeid(cc.vv.packid.PACKETID_210);\r\n                        pw.writeu8(inviterId);\r\n                        pw.writes(inviterName);\r\n                        if (\"undefined\" !== typeof inviterMatchId) {\r\n                            pw.writeu4(inviterMatchId);\r\n                        } else {\r\n                            pw.writeu4(0);\r\n                        }\r\n                        cc.vv.socketMgr.bufferPack(pw.getdata());\r\n                    }\r\n                } else {\r\n                    console.log(\"[ queryData is Null ]\");\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_230\", function (data) {\r\n            // console.log(data)\r\n            cc.vv.lan.FZMJ_NOTIVE = data[\"noticeContent\"];\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_240\", function (data) {\r\n            console.log(\"[ => callback 240 ]\");\r\n            console.log(data.language);\r\n\r\n            // test code\r\n            // data.language = '{\"GOLD_ENTER_CONDITION_1\":2,\"MATCH_LAN.128\":1}';\r\n\r\n            // data.language = '[{\"a\":1}]';\r\n\r\n\r\n            // 兼容上一个版本的错误的配置\r\n            if (data.language.length > 0 && data.language.substr(0, 1) == '[') {\r\n                console.log('start with [');\r\n                return;\r\n            }\r\n\r\n            var fixlan = JSON.parse(data.language);\r\n            console.log(fixlan);\r\n\r\n            console.log(typeof fixlan);\r\n\r\n            for (var k in fixlan) {\r\n\r\n                var v = fixlan[k];\r\n                var klen = k.length;\r\n\r\n                var idx = k.lastIndexOf(\".\");\r\n\r\n                console.log('idx ' + idx)\r\n\r\n                if (idx != -1) {\r\n\r\n                    // 数组key\r\n\r\n                    var front = k.substring(0, idx);\r\n                    var back = k.substring(idx + 1, klen);\r\n\r\n                    console.log('front = ' + front);\r\n                    console.log(' back = ' + back);\r\n\r\n                    cc.vv.lan[front][parseInt(back)] = v;\r\n                }\r\n                else {\r\n\r\n                    // 单key\r\n                    cc.vv.lan[k] = v;\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_246\", function (data) {\r\n            console.log(\"[ => callback 246 ]\");\r\n            console.log(data);\r\n            if (data.const == \"\") {\r\n                console.log('  246  Object  is  null');\r\n                return;\r\n            }\r\n            var fixconst = JSON.parse(data.const);\r\n\r\n            console.log(fixconst);\r\n\r\n            console.log(typeof fixconst);\r\n\r\n            for (var k in fixconst) {\r\n\r\n                var v = fixconst[k];\r\n                var klen = k.length;\r\n\r\n                var idx = k.lastIndexOf(\".\");\r\n\r\n                console.log('idx ' + idx)\r\n\r\n                if (idx != -1) {\r\n\r\n                    // 数组key\r\n\r\n                    var front = k.substring(0, idx);\r\n                    var back = k.substring(idx + 1, klen);\r\n\r\n                    console.log('front = ' + front);\r\n                    console.log(' back = ' + back);\r\n\r\n                    cc.vv.const[front][parseInt(back - 1)] = Number(v);\r\n                }\r\n                else {\r\n                    cc.vv.const[k] = v;\r\n                }\r\n            }\r\n\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_249\", function (data) {\r\n            console.log(\"[ => callback 249 ]\");\r\n            console.log(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_303\", function (data) {\r\n            // console.log(data);\r\n            if (data.resultCode == 0) {\r\n                if (cc.vv.gameNetMgr.roomData.seatIndex != cc.vv.gameNetMgr.roomData.zhuangIndex) {\r\n                    self.dispatchEvent(cc.vv.gameEvent.EVENT_ROOM_CLOSED);\r\n                }\r\n            }\r\n            else {\r\n                console.log(\"_PACKET_303 respond. code = \" + data.resultCode);\r\n            }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_309\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket309(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_ROOM_VOTE_DISBAND);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_310\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket310(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_GAME_DISBAND_SETTLEMENT);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_311\", function (data) {\r\n            // console.log(data);\r\n            if (self.roomData.gameBegin) {\r\n                // cc.vv.gameNetMgr.roomData.clean();\r\n                self.dispatchEvent(cc.vv.gameEvent.EVENT_ROOM_CLOSED);\r\n            } else {\r\n                if (self.roomData.zhuangIndex == self.roomData.seatIndex) {\r\n                    cc.vv.utils.showDialogOK(cc.vv.lan.FZMJ_LAN[38], function () {\r\n                        cc.vv.gameNetMgr.roomData.clean();\r\n                        cc.vv.gameNetMgr.dispatchEvent(cc.vv.gameEvent.EVENT_ROOM_CLOSED);\r\n                    });\r\n                } else {\r\n                    self.dispatchEvent(cc.vv.gameEvent.EVENT_ROOM_CLOSED);\r\n                }\r\n            }\r\n            self.roomData.gameBegin = true;\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_315\", function (data) {\r\n            // console.log(\"=> gameEvent callback 315\");\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_317\", function (data) {\r\n            // console.log(\"=> gameEvent callback 317\");\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_318\", function (data) {\r\n            // console.log(\"=> gameEvent callback 318\");\r\n            // console.log(cc.vv.gameEvent.EVENT_INTERACTIVE);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_INTERACTIVE, data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_401\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket401(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_GAME_BEGIN);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_402\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket402(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_NEWCMD, data.pindex);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_403\", function (data) {\r\n            // console.log(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_CMDRESPOND, data.resultCode);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_404\", function (data) {\r\n            // console.log(data);\r\n            var pai = 0;\r\n            if (data.type != 255 && data.value != 255) {\r\n                pai = cc.vv.const.MJTYPE_MULTI * data.type + data.value;\r\n            }\r\n            self.doMOPAI(data.direction, pai);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_405\", function (data) {\r\n            // console.log(data);\r\n\r\n            self.doOptResult(data);\r\n\r\n            // self.roomData.initPacket401(data);\r\n            // self.dispatchEvent(cc.vv.gameEvent.EVENT_GAME_BEGIN);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_406\", function (data) {\r\n            // console.log(data);\r\n            // self.roomData.initPacket406(data);\r\n            // self.dispatchEvent(cc.vv.gameEvent.EVENT_GAME_BEGIN);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_407\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket407(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_GAME_SETTLEMENT);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_410\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket410(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_MEMBER_CHANGE);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_411\", function (data) {\r\n            // console.log(data);\r\n            self.doKAIJIN(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_413\", function (data) {\r\n            // console.log(data);\r\n            self.roomData.readPacket413(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_MOON);\r\n        }, this);\r\n\r\n        // 福州麻将听金坎状态\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_434\", function (data) {\r\n            console.log(data);\r\n            self.roomData.readPacket434(data);\r\n            self.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_GOLDCAMP, data.direction);\r\n        }, this);\r\n\r\n        //////////////////////////// match ////////////////////////////////\r\n\r\n        // \r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_909\", function (data) {\r\n            // console.log(data);\r\n\r\n            if (data.playerId == cc.vv.myself.playerId) {\r\n\r\n                if (data.autoState > 0) {\r\n                    cc.vv.roomData.bAutomatic = true;\r\n                }\r\n                else {\r\n                    cc.vv.roomData.bAutomatic = false;\r\n                }\r\n\r\n                self.dispatchEvent(cc.vv.gameEvent.EVENT_AUTOMATIC_CHANGED);\r\n            }\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_951\", function (data) {\r\n            console.log(data);\r\n            self.matchData.readPacket951(data);\r\n            // console.log(self.matchData);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_953\", function (data) {\r\n            console.log(data);\r\n            self.matchData.readPacket953(data);\r\n            // console.log(self.matchData);\r\n            cc.vv.gameEvent.dispatchEvent(cc.vv.gameEvent.EVENT_MATCH_STATE_CHANGED, data.state);\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_956\", function (data) {\r\n            console.log(data);\r\n            self.matchData.readPacket956(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_957\", function (data) {\r\n            console.log(data);\r\n\r\n            if (data.resultCode != 0) {\r\n                cc.vv.utils.showDialogOK(\"continues. errcode=\" + data.resultCode, null, false);\r\n            }\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_958\", function (data) {\r\n            console.log(data);\r\n            self.matchData.readPacket958(data);\r\n            cc.vv.matchData.gamePrepareShareArr = [];\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_959\", function (data) {\r\n            console.log(data);\r\n            self.matchData.readPacket959(data);\r\n            cc.vv.gameEvent.dispatchEvent(cc.vv.gameEvent.EVENT_MATCH_AWARD_SHARE);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_961\", function (data) {\r\n            console.log(\" => PACKET_961\");\r\n            console.log(data);\r\n            cc.vv.matchData.gamePrepareShareArr.push(data);\r\n            cc.vv.matchData.curScore += data.fuelValue;\r\n\r\n            // var mjBattleNode = cc.find('Canvas/mj_battle_node');\r\n            // if (mjBattleNode) {\r\n            //     mjBattleNode.getChildByName(\"match_award_help\").getComponent(\"MJAwardHelp\").onCreateAwardItemEvent(data);\r\n            // } \r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_965\", function (data) {\r\n            console.log(\"=> PACKET_965\");\r\n            console.log(data);\r\n            cc.vv.matchData.gamePrepareShareArr = data.gamePrepareShareLen_child;\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1001\", function (data) {\r\n            cc.vv.myself.largessGoldValue = data.gold;\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1003\", function (data) {\r\n            console.log(\"=> PACKET_1003\");\r\n            console.log(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1004\", function (data) {\r\n            console.log(\"=> PACKET_1004\");\r\n            console.log(data);\r\n\r\n            cc.vv.matchData.goldFieldId = data.goldGameID;\r\n            cc.vv.matchData.goldFieldState = data.state;\r\n\r\n            // 处理重连时，玩家选择的金币场被清空，此时从服务器读取 \r\n            if (cc.vv.matchData.goldPlayerEnterId == 0) {\r\n                cc.vv.matchData.goldPlayerEnterId = cc.vv.matchData.goldFieldId;\r\n            }\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1007\", function (data) {\r\n            console.log(\"=> PACKET_1007\");\r\n            console.log(data);\r\n\r\n            self.roomData.readPacket1007(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1005\", function (data) {\r\n            console.log(\"=> PACKET_1005\");\r\n            console.log(data);\r\n            for (var i = 0; i < data.goldGameNum_child.length; i++) {\r\n                var gameid = data.goldGameNum_child[i].goldGameID;\r\n                var onlineNum = data.goldGameNum_child[i].playerNum;\r\n                cc.vv.matchData.goldFieldOnlines[gameid - 1] = onlineNum;\r\n            }\r\n            console.log(cc.vv.matchData.goldFieldOnlines);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1010\", function (data) {\r\n            console.log(\"=> PACKET_1010\");\r\n            console.log(data);\r\n\r\n            self.roomData.readPacket1010(data);\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1011\", function (data) {\r\n\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1016\", function (data) {\r\n            cc.vv.myself.redPacketTag = true;\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1017\", function (data) {\r\n            console.log(\"=> gameEvent callBack 1017\");\r\n            if (data.resultCode == 0) {\r\n                cc.vv.utils.showDialogOK(cc.vv.lan.MATCH_LAN[127].format(data.ticketAward), function () {\r\n                    this.node.destroy();\r\n                }, false, cc.vv.enum.EnumLabelHorizontalAlign.CENTER);\r\n            }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1020\", function (data) {\r\n            console.log(\"=> gameEvent callBack 1020\");\r\n            console.log(data);\r\n            for (let i = 0; i < data.goldMatchInfoLen; i++) {\r\n                var infoData = data.goldMatchInfoLen_child[i];\r\n                cc.vv.matchData.goldMatchPacketValueArr.push(infoData.awardBonus / 100);\r\n                if (infoData.goldMatchType == cc.vv.enum.EnumGoldGameType.EGGT_LOW) {\r\n                    cc.vv.myself.sprogGoldMatchTimes = infoData.playedTimes;\r\n                } else if (infoData.goldMatchType == cc.vv.enum.EnumGoldGameType.EGGT_MIDDLE) {\r\n                    cc.vv.myself.richGoldMatchTimes = infoData.playedTimes;\r\n                } else if (infoData.goldMatchType == cc.vv.enum.EnumGoldGameType.EGGT_HIGHT) {\r\n                    cc.vv.myself.masterGoldMatchTimes = infoData.playedTimes;\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1021\", function (data) {\r\n            console.log(\"=> PACKET_1021\");\r\n            console.log(data);\r\n            cc.vv.myself.isFreeGold = true;\r\n        }, this);\r\n\r\n        cc.vv.gameEvent.addEventHandler(\"_PACKET_1022\", function (data) {\r\n            console.log(\"=> PACKET_1022\");\r\n            cc.vv.matchData.goldMangerArr = [];\r\n            cc.vv.const.GOLD_RISING_POURING = [];\r\n            cc.vv.const.GOLD_ENTER_CONDITION = [];\r\n            cc.vv.matchData.goldMatchOpenIDArr = [];\r\n            cc.vv.matchData.goldMangerArr = data.goldMatchLen_child;\r\n            var goldMangerArr = cc.vv.matchData.goldMangerArr;\r\n            console.log(goldMangerArr);\r\n            for (let i = 0; i < data.goldMatchLen; i++) {\r\n                cc.vv.const.GOLD_RISING_POURING.push(goldMangerArr[i].castBottom);\r\n                cc.vv.const.GOLD_ENTER_CONDITION.push({ min: goldMangerArr[i].lowerLimit, max: goldMangerArr[i].superiorLimit });\r\n                if (data.goldMatchLen_child[i].isOpen > 0) {\r\n                    cc.vv.matchData.goldMatchOpenIDArr.push(goldMangerArr[i].goldMatchType);\r\n                }\r\n            }\r\n        }, this);\r\n    },\r\n\r\n    // 操作结果\r\n    doOptResult(data) {\r\n\r\n        var MJTYPE_MULTI = cc.vv.const.MJTYPE_MULTI;\r\n\r\n        console.log(\"receive opt, seat: \" + data.direction + \" opt:\" + cc.vv.lan.MJOPT_NAME[data.option]);\r\n        console.log(data);\r\n\r\n        var opt = data.option;\r\n\r\n        var pai1 = MJTYPE_MULTI * data.pai1_type + data.pai1_value;\r\n        var pai2 = MJTYPE_MULTI * data.pai2_type + data.pai2_value;\r\n        var pai3 = MJTYPE_MULTI * data.pai3_type + data.pai3_value;\r\n\r\n        if (opt == cc.vv.enum.EnumCmdType.MJOPT_BUHUA) {\r\n            var huas = [];\r\n            var bupais = [];\r\n            var kaiju = data.z_isFirstBuhua;\r\n\r\n            var optionHua_child = data.optionHua_child[0];\r\n\r\n            for (var i = 0; i < optionHua_child.huaCard_Num_child.length; i++) {\r\n                huas.push(MJTYPE_MULTI * optionHua_child.huaCard_Num_child[i].huaCard_type + optionHua_child.huaCard_Num_child[i].huaCard_value);\r\n            }\r\n            for (var i = 0; i < optionHua_child.putCard_Num_child.length; i++) {\r\n                bupais.push(MJTYPE_MULTI * optionHua_child.putCard_Num_child[i].putCard_type + optionHua_child.putCard_Num_child[i].putCard_value);\r\n            }\r\n            this.doBUHUA(data.direction, huas, bupais, kaiju);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_CHI) {\r\n            this.doCHI(data.direction, pai1, pai2, pai3);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_PENG) {\r\n            this.doPENG(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_GANG) {\r\n            this.doGANG(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_ANGANG) {\r\n            this.doANGANG(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_JIAGANG) {\r\n            this.doJIAGANG(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_DA) {\r\n            this.roomData.lastDAIndex = data.direction;\r\n            this.doDA(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_GUO1) {\r\n            this.roomData.lastDAIndex = data.direction;\r\n            this.doDA(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_DA_T) {\r\n            this.roomData.lastDAIndex = data.direction;\r\n            this.doDA(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_GUO2) {\r\n            this.roomData.lastDAIndex = data.direction;\r\n            this.doDA(data.direction, pai1);\r\n        }\r\n        else if (opt == cc.vv.enum.EnumCmdType.MJOPT_TING) {\r\n            this.roomData.lastDAIndex = data.direction;\r\n            this.doTING(data.direction, pai1);\r\n        }\r\n    },\r\n\r\n    doKAIJIN(data) {\r\n\r\n        var MJTYPE_MULTI = cc.vv.const.MJTYPE_MULTI;\r\n        var king = MJTYPE_MULTI * data.goldType + data.goldValue;\r\n        this.roomData.king = king;\r\n\r\n        var zhuangIndex = this.roomData.zhuangIndex;\r\n        var seatData = this.roomData.seats[zhuangIndex];\r\n\r\n        for (var i = 0; i < data.flowerNum_child.length; i++) {\r\n            var huapai = MJTYPE_MULTI * data.flowerNum_child[i].type + data.flowerNum_child[i].value;\r\n            seatData.huas.push(huapai);\r\n        }\r\n\r\n        var oldNum = this.roomData.remainCard;\r\n\r\n        this.roomData.subRemainCard(data.flowerNum_child.length + 1);  // 开金的话 + 金牌\r\n\r\n        var newNum = this.roomData.remainCard;\r\n\r\n        console.log('kaijin bupai len=' + data.flowerNum_child.length + 1);\r\n        console.log('sub remain card x' + (data.flowerNum_child.length + 1) + ' old=' + oldNum + ' new=' + newNum + ' opt=kaiju buhua');\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_KAIJIN, { seatIndex: zhuangIndex, king: king, huacount: data.flowerNum_child.length });\r\n    },\r\n\r\n    doBUHUA(seatIndex, huas, bupais, kaiju) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 花牌从手上移动到花堆\r\n        for (var i = 0; i < huas.length; i++) {\r\n            if (seatIndex == myseatIndex) {\r\n                var idx = seatData.holds.indexOf(huas[i]);\r\n                if (idx != -1) {\r\n                    seatData.holds.splice(idx, 1);\r\n                }\r\n            }\r\n            seatData.huas.push(huas[i]);\r\n        }\r\n        // 补充手牌\r\n        if (seatIndex == myseatIndex) {\r\n            for (var i = 0; i < bupais.length; i++) {\r\n                seatData.holds.push(bupais[i]);\r\n            }\r\n        }\r\n\r\n        var oldNum = this.roomData.remainCard;\r\n\r\n        this.roomData.subRemainCard(huas.length);\r\n\r\n        var newNum = this.roomData.remainCard;\r\n\r\n        console.log('bupai len=' + huas.length);\r\n        console.log('sub remain card x' + huas.length + ' old=' + oldNum + ' new=' + newNum + ' opt=buhua');\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_BUHUA, { seatIndex: seatIndex, huas: huas, bupais: bupais, kaiju: kaiju });\r\n    },\r\n\r\n    doCHI(seatIndex, pai1, pai2, pai3) {\r\n\r\n        // pai2是吃进来的 pai1,pai3是手上的\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n\r\n        if (seatIndex == myseatIndex) {\r\n            var idx = -1;\r\n            idx = seatData.holds.indexOf(pai1);\r\n            if (idx != -1) {\r\n                seatData.holds.splice(idx, 1);\r\n            }\r\n            idx = seatData.holds.indexOf(pai3);\r\n            if (idx != -1) {\r\n                seatData.holds.splice(idx, 1);\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n\r\n        // 添加吃牌\r\n        seatData.chis.push(pai1);\r\n        seatData.chis.push(pai2);\r\n        seatData.chis.push(pai3);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_CHI, { seatIndex: seatIndex, pai1: pai1, pai2: pai2, pai3: pai3 });\r\n    },\r\n\r\n    doPENG(seatIndex, pai) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            for (var i = 0; i < 2; i++) {\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if (idx != -1) {\r\n                    seatData.holds.splice(idx, 1);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n\r\n        // 添加碰牌\r\n        seatData.pengs.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_PENG, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doGANG(seatIndex, pai, ag) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            for (var i = 0; i < 3; i++) {\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if (idx != -1) {\r\n                    seatData.holds.splice(idx, 1);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n            seatData.holds.splice(0, 1);\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n\r\n        // 添加杠牌\r\n        seatData.gangs.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_GANG, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doANGANG(seatIndex, pai) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            for (var i = 0; i < 4; i++) {\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if (idx != -1) {\r\n                    seatData.holds.splice(idx, 1);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < 4; i++) {\r\n                seatData.holds.splice(0, 1);\r\n            }\r\n        }\r\n\r\n        // 添加杠牌\r\n        seatData.angangs.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_ANGANG, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doJIAGANG(seatIndex, pai) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            for (var i = 0; i < 1; i++) {\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if (idx != -1) {\r\n                    seatData.holds.splice(idx, 1);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n\r\n        // 移除碰牌\r\n        var pengidx = seatData.pengs.indexOf(pai);\r\n        if (pengidx != -1) {\r\n            seatData.pengs.splice(pengidx, 1);\r\n        }\r\n\r\n        // 添加杠牌\r\n        seatData.gangs.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_JIAGANG, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doDA(seatIndex, pai) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            var idx = seatData.holds.indexOf(pai);\r\n            if (idx != -1) {\r\n                seatData.holds.splice(idx, 1);\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n        // 添加出牌\r\n        seatData.folds.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_DA, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doTING(seatIndex, pai) {\r\n\r\n        console.log('[GameNetMgr.doTING] seatIndex=' + seatIndex + ' pai=' + pai);\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n        // 移除手牌\r\n        if (seatIndex == myseatIndex) {\r\n            var idx = seatData.holds.indexOf(pai);\r\n            if (idx != -1) {\r\n                seatData.holds.splice(idx, 1);\r\n            }\r\n        }\r\n        else {\r\n            seatData.holds.splice(0, 1);\r\n        }\r\n        // 添加出牌\r\n        seatData.folds.push(pai);\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_TING, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    doMOPAI(seatIndex, pai) {\r\n\r\n        var myseatIndex = this.roomData.seatIndex;\r\n        var seatData = this.roomData.seats[seatIndex];\r\n\r\n        // console.log(\"before mopai\");\r\n        // console.log(seatData.holds);\r\n\r\n        if (seatIndex == myseatIndex) {\r\n            seatData.holds.push(pai);\r\n        }\r\n        else {\r\n            seatData.holds.push(0);\r\n        }\r\n\r\n        // console.log(\"after mopai\");\r\n        // console.log(seatData.holds);\r\n\r\n        var oldNum = this.roomData.remainCard;\r\n\r\n        this.roomData.subRemainCard(1);\r\n\r\n        var newNum = this.roomData.remainCard;\r\n\r\n        console.log('sub remain card x1' + ' old=' + oldNum + ' new=' + newNum + ' opt=mopai');\r\n\r\n        this.dispatchEvent(cc.vv.gameEvent.EVENT_MJ_MOPAI, { seatIndex: seatIndex, pai: pai });\r\n    },\r\n\r\n    // 玩家执行命令\r\n    sendPlayerCmdExcute(seatIndex, cmdcode, mjid1, mjid2, chiIndex, choice) {\r\n\r\n        var pt1 = 255;\r\n        var pv1 = 255;\r\n        var pt2 = 255;\r\n        var pv2 = 255;\r\n\r\n        if (mjid1) {\r\n            pt1 = Math.floor(mjid1 / cc.vv.const.MJTYPE_MULTI);\r\n            pv1 = mjid1 % cc.vv.const.MJTYPE_MULTI;\r\n        }\r\n        if (mjid2) {\r\n            pt2 = Math.floor(mjid1 / cc.vv.const.MJTYPE_MULTI);\r\n            pv2 = mjid1 % cc.vv.const.MJTYPE_MULTI;\r\n        }\r\n\r\n        if (chiIndex == null) {\r\n            chiIndex = 0;\r\n        }\r\n        if (choice == null || choice == false) {\r\n            choice = 0;\r\n        }\r\n        else {\r\n            choice = 1;\r\n        }\r\n\r\n        var pw = new PacketWriter();\r\n        pw.writeid(cc.vv.packid.PACKETID_403);\r\n        pw.writeu1(seatIndex);\r\n        pw.writeu1(cmdcode);\r\n        pw.writeu1(pt1);\r\n        pw.writeu1(pv1);\r\n        pw.writeu1(pt2);\r\n        pw.writeu1(pv2);\r\n        pw.writeu1(chiIndex);\r\n        pw.writeu1(choice);\r\n\r\n        // console.log(pw);\r\n\r\n        cc.vv.socketMgr.bufferPack(pw.getdata());\r\n    },\r\n\r\n    connectGameServer: function (data) {\r\n        this.dissoveData = null;\r\n        cc.vv.net.ip = data.ip + \":\" + data.port;\r\n        console.log(cc.vv.net.ip);\r\n        var self = this;\r\n\r\n        var onConnectOK = function () {\r\n            console.log(\"onConnectOK\");\r\n            var sd = {\r\n                token: data.token,\r\n                roomid: data.roomid,\r\n                time: data.time,\r\n                sign: data.sign,\r\n            };\r\n            cc.vv.net.send(\"login\", sd);\r\n        };\r\n\r\n        var onConnectFailed = function () {\r\n            console.log(\"failed.\");\r\n            cc.vv.wc.hide();\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.net.connect(onConnectOK, onConnectFailed);\r\n    },\r\n\r\n    // 响应解散房间操作\r\n    sendVoteDisband: function (isAgree) {\r\n        var pw = new PacketWriter();\r\n        pw.writeid(cc.vv.packid.PACKETID_305);\r\n        pw.writeu1(isAgree);\r\n\r\n        cc.vv.socketMgr.bufferPack(pw.getdata());\r\n    },\r\n\r\n    // 解散房间\r\n    sendDisband: function () {\r\n        var pw = new PacketWriter();\r\n        pw.writeid(cc.vv.packid.PACKETID_304);\r\n        pw.writeu1(1);\r\n\r\n        cc.vv.socketMgr.bufferPack(pw.getdata());\r\n    },\r\n\r\n    // 后台切回前台，尝试重连逻辑服务器\r\n    tryReconnectLogicServer: function () {\r\n\r\n        if (cc.vv.myself.playerId > 0) {\r\n\r\n            /** Reconnect Protocol\r\n             *  C->S\r\n                {\r\n                    Uint64\t玩家ID\r\n                    Uint32\t小版本号\r\n                    Uint8\t是否插件模式外框\r\n                    Uint8\t是否插件模式\r\n                }\r\n                S->C\r\n                {\r\n                    Uint8  结果0成功其他 errorcode\r\n                    Uint8  当前状态 1大厅 2房间等待 3房间战斗 4下一回合等待开始\r\n                }\r\n             */\r\n\r\n            cc.vv.gameNetMgr.roomData.bNeedLoad = true;\r\n\r\n            var pw = new PacketWriter();\r\n            pw.writeid(cc.vv.packid.PACKETID_104);\r\n            pw.writeu8(cc.vv.myself.playerId);\r\n            pw.writeu4(0);\r\n            cc.vv.socketMgr.bufferPack(pw.getdata());\r\n            console.log('send 104 reconnect logic server');\r\n        }\r\n\r\n    },\r\n\r\n    onRequestPlayerInfoEvent(playerId) {\r\n        console.log(\"ask\" + \"_\" + playerId + \"_\" + \"playerInfo\");\r\n        var pw = new PacketWriter();\r\n        pw.writeid(cc.vv.packid.PACKETID_208);\r\n        pw.writeu8(playerId);\r\n        cc.vv.socketMgr.bufferPack(pw.getdata());\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}