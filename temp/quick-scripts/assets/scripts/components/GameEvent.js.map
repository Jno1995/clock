{"version":3,"sources":["GameEvent.js"],"names":["GameEvent","EVENT_WSS_OPEN","EVENT_WSS_CLOSED","EVENT_WX_LOGIN_STATE","EVENT_WX_QUERY","EVENT_ENTER_FOREGROUND","EVENT_ENTER_BACKGROUND","EVENT_AUDIO_INTERRUPTION_BEGIN","EVENT_AUDIO_INTERRUPTION_END","EVENT_HALL_PREPARE","EVENT_NEW_MESSAGE","EVENT_MESSAGE_READED","EVENT_MEMBER_CHANGE","EVENT_GAME_BEGIN","EVENT_GAME_SETTLEMENT","EVENT_GAME_OVER","EVENT_ROOM_CLOSED","EVENT_ROOM_VOTE_DISBAND","EVENT_GAME_DISBAND_SETTLEMENT","EVENT_AUTOMATIC_CHANGED","EVENT_INTERACTIVE","EVENT_MJ_NEWCMD","EVENT_MJ_CMDRESPOND","EVENT_MJ_MOPAI","EVENT_MJ_BUHUA","EVENT_MJ_CHI","EVENT_MJ_PENG","EVENT_MJ_GANG","EVENT_MJ_ANGANG","EVENT_MJ_JIAGANG","EVENT_MJ_DA","EVENT_MJ_TING","EVENT_MJ_KAIJIN","EVENT_MJ_GOLDCAMP","EVENT_MJ_MOON","EVENT_SETTING_TING","EVENT_MATCH_STATE_CHANGED","EVENT_MATCH_ENTER_HALL","EVENT_MATCH_COMPLETED_RESULT_SHOW","EVENT_MATCH_AWARD_SHARE","EVENT_MATCH_MATCHING_SHOW","EVENT_BREAK_SHARE","EVENT_BACK_HALL","EVENT_START_TIME","EVENT_UPDATE_HEART","EVENT_INIT_MAPDATA_COMPLETE","EVENT_GAME_RESTART","EVENT_GAME_WIN","handlers","init","dispatchEvent","event","data","console","log","tar","addEventHandler","fn","target","handler","__instanceId","removeEventHandler","dumpEventHandlers","evt","module","exports","cc"],"mappings":"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","file":"GameEvent.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["let GameEvent = {\r\n    // websocket连接\r\n    EVENT_WSS_OPEN: 'wss_open',\r\n    EVENT_WSS_CLOSED: 'wss_closed',\r\n\r\n    // login\r\n\r\n    EVENT_WX_LOGIN_STATE: 'wx_login_state', // 微信登录状态\r\n    EVENT_WX_QUERY: 'wx_query', // 加载时获取到查询参数\r\n\r\n    // 前后台切换\r\n\r\n    EVENT_ENTER_FOREGROUND: 'enter_foreground', // 切前台，基于微信小游戏sdk wx.onHide\r\n    EVENT_ENTER_BACKGROUND: 'enter_background', // 切后台，基于微信小游戏sdk wx.onShow\r\n\r\n    EVENT_AUDIO_INTERRUPTION_BEGIN: 'EVENT_AUDIO_INTERRUPTION_BEGIN',\r\n    EVENT_AUDIO_INTERRUPTION_END: 'EVENT_AUDIO_INTERRUPTION_END',\r\n\r\n    //公告 230\r\n    //活动信息 238\r\n    EVENT_HALL_PREPARE: \"hall_prepared\",\r\n\r\n    //收到新消息\r\n    EVENT_NEW_MESSAGE: \"\",\r\n\r\n    EVENT_MESSAGE_READED: \"message_readed\",  // 消息全部已读\r\n\r\n    //排行榜变更\r\n\r\n    // 房间\r\n\r\n    EVENT_MEMBER_CHANGE: \"member_change\", // 成员变换\r\n    EVENT_GAME_BEGIN: \"game_begin\",  // 游戏开始\r\n    EVENT_GAME_SETTLEMENT: \"game_settlement\", // 游戏回合结算\r\n    EVENT_GAME_OVER: \"game_over\", // 游戏结束\r\n    EVENT_ROOM_CLOSED: \"room_closed\", // 房间关闭\r\n    EVENT_ROOM_VOTE_DISBAND: \"room_vote_disband\", // 房间投票解散\r\n    EVENT_GAME_DISBAND_SETTLEMENT: \"game_disband_settlement\", // 游戏解散房间结算\r\n\r\n    EVENT_AUTOMATIC_CHANGED: \"automatic_changed\", // 托管状态改变\r\n    EVENT_INTERACTIVE: \"interactive_play\", // 道具互动\r\n    // 打牌\r\n\r\n    EVENT_MJ_NEWCMD: \"newcmd\", // 操作序列\r\n    EVENT_MJ_CMDRESPOND: \"cmdrespond\", // 操作响应\r\n\r\n    EVENT_MJ_MOPAI: \"mopai\",\r\n    EVENT_MJ_BUHUA: \"buhua\",\r\n    EVENT_MJ_CHI: \"chi\",\r\n    EVENT_MJ_PENG: \"peng\",\r\n    EVENT_MJ_GANG: \"gang\",\r\n    EVENT_MJ_ANGANG: \"angang\",\r\n    EVENT_MJ_JIAGANG: \"jiagang\",\r\n    EVENT_MJ_DA: \"da\",\r\n    EVENT_MJ_TING: \"ting\", // 听金坎操作\r\n    EVENT_MJ_KAIJIN: \"kaijin\",\r\n    EVENT_MJ_GOLDCAMP: \"goldCamp\",  // 434协议状态\r\n    EVENT_MJ_MOON: \"moon\",\r\n\r\n    // 设置\r\n    EVENT_SETTING_TING: \"setting_ting\", // 设置中改变了听牌提示状态\r\n\r\n    // 比赛\r\n\r\n    EVENT_MATCH_STATE_CHANGED: \"match_state_changed\",\r\n\r\n    EVENT_MATCH_ENTER_HALL: \"match_back_hall\",  // 回到大厅\r\n\r\n    EVENT_MATCH_COMPLETED_RESULT_SHOW: 'match_completed_result_show', // 显示挑战结束\r\n\r\n    EVENT_MATCH_AWARD_SHARE: 'match_award_share', // 比赛奖金分享\r\n\r\n    EVENT_MATCH_MATCHING_SHOW: 'match_matching_show', // 显示匹配中\r\n\r\n    // 答题\r\n    EVENT_BREAK_SHARE: 'answer_break_share', // 大关卡分享\r\n    EVENT_BACK_HALL: 'answer_back_hall', // 返回大厅\r\n    // EVENT_HALL_SHARE:'answer_hall_share',// 大厅分享\r\n    EVENT_START_TIME: 'answer_start_time',// 开始游戏倒计时\r\n    EVENT_UPDATE_HEART: 'answer_update_heart',// 刷新心数\r\n    \r\n    // 大厅事件\r\n    EVENT_INIT_MAPDATA_COMPLETE : 'init_mapdata_complete', //地图数据初始化完成\r\n\r\n    EVENT_GAME_RESTART: \"game_restart\", //重启游戏\r\n\r\n    EVENT_GAME_WIN: \"game_win\", //赢得游戏\r\n    \r\n    handlers: null,\r\n\r\n    init: function () {\r\n        this.handlers = {};\r\n    },\r\n\r\n    dispatchEvent: function (event, data) {\r\n        if (this.handlers[event]) {\r\n\r\n            console.log(\"HANDLER \" + event);\r\n\r\n            for (var tar in this.handlers[event]) {\r\n                this.handlers[event][tar](data);\r\n                // if (event == '_PACKET_330') break; // 特殊事件处理\r\n            }\r\n        }\r\n        else {\r\n            console.log(\"NO HANDLER \" + event);\r\n        }\r\n    },\r\n\r\n    addEventHandler: function (event, fn, target) {\r\n\r\n        if (this.handlers[event]) {\r\n            // console.log(\"event:\" + event + \" handler has been registered.\");\r\n            // return;\r\n        }\r\n        else {\r\n            this.handlers[event] = {};\r\n        }\r\n\r\n        var handler = function (data) {\r\n            fn(data);\r\n        };\r\n\r\n        this.handlers[event][target.__instanceId] = handler;\r\n\r\n    },\r\n\r\n    removeEventHandler: function (event, target) {\r\n\r\n        console.log(\"removeEvent: \" + event + \" targetId: \" + target.__instanceId);\r\n\r\n        if (this.handlers[event] && this.handlers[event][target.__instanceId]) {\r\n            delete (this.handlers[event][target.__instanceId]);\r\n            // delete empty event\r\n            // delete(this.handlers[evnet]);\r\n        }\r\n\r\n        // this.dumpEventHandlers();\r\n    },\r\n\r\n    dumpEventHandlers() {\r\n        console.log(\"dumpEventHandlers begin\");\r\n        for (var evt in this.handlers) {\r\n            console.log(\"--\" + evt);\r\n            // console.log(this.handlers[evt]);\r\n            for (var tar in this.handlers[evt]) {\r\n                console.log(\"  --\" + typeof (tar) + \" \" + typeof (this.handlers[evt][tar.__instanceId]));\r\n            }\r\n        }\r\n        console.log(\"dumpEventHandlers end\");\r\n    },\r\n};\r\nmodule.exports = GameEvent;\r\ncc.GameEvent = GameEvent;"]}